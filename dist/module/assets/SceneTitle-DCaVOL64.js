const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./SceneAdventure0-C21NSaGc.js","../run.js","./SceneAdventure1-CRzGrK-O.js","./SceneAdventure2-BhLiE6IG.js","./SceneGame-CtHWhMcB.js"])))=>i.map(i=>d[i]);
import{S as _,P as b,D as g,B as d,a as i,_ as c,b as S}from"../run.js";const y=["1階のカギ","包丁","ライター","空のバケツ"],f=["ぬるついたハンマー","ヘアピン","魔導書","薄い本"],I=[],E={"1階のカギ":"(玄関のすぐ奥の扉の鍵。......2重扉?)",包丁:"(軽くて扱いやすい包丁。)",ライター:"(よくあるライター。オイルは十分)",空のバケツ:"(何の変哲もないバケツ。)",水の入ったバケツ:"(水の入ったバケツ。地味に重い。)",ぬるついたハンマー:"(滑って使えそうにない。)",ハンマー:"(鍵もブッ壊せそうなハンマー。)",ヘアピン:"(技術があればピッキングできそう。)",魔導書:"(物体を変質させる魔法が書いてある。)",薄い本:"しばくぞ。"};class l{static getChapter(){const t=localStorage.getItem("chapter");return t?JSON.parse(t):0}static setChapter(t){localStorage.setItem("chapter",`${t}`)}static getCurrentBranch(){const t=localStorage.getItem("current-branch");return t?JSON.parse(t):[]}static setCurrentBranch(t){localStorage.setItem("current-branch",JSON.stringify(t))}static addBranch(t){const s=this.getCurrentBranch();s.push(t),this.setCurrentBranch(s)}static getItems(){const t=localStorage.getItem("items");return t?JSON.parse(t):[]}static setItems(t){localStorage.setItem("items",JSON.stringify(t))}static removeItem(t){const s=this.getItems();this.setItems(s.filter(a=>a!==t))}static addItem(t){const s=this.getItems();s.includes(t)||(s.push(t),this.setItems(s))}static getFlags(){const t=localStorage.getItem("flags");return t?JSON.parse(t):[]}static setFlags(t){localStorage.setItem("flags",JSON.stringify(t))}static addFlag(t){const s=this.getFlags();s.push(t),this.setFlags(s)}static addClearedStageId(t){const s=this.getClearedStageId();s.includes(t)||(s.push(t),localStorage.setItem("cleared-stages",JSON.stringify(s)))}static getClearedStageId(){const t=localStorage.getItem("cleared-stages");return t?JSON.parse(t):[]}static getVolume(){const t=localStorage.getItem("volume");return t?JSON.parse(t):{bgm:9,se:9}}static setVolume(t){localStorage.setItem("volume",JSON.stringify(t))}}class h extends _{ready;#t=new b;constructor(t){super(),this.ready=this.#e(t)}async#e(t){const s=await(await fetch("pages/title.html")).text();await this.#t.load(g.container,s,{history:t}),d.ffp("assets/sounds/title.mp3"),this.#t.on("start",async()=>{const e=Object.assign({"./SceneAdventure0.ts":()=>c(()=>import("./SceneAdventure0-C21NSaGc.js"),__vite__mapDeps([0,1]),import.meta.url),"./SceneAdventure1.ts":()=>c(()=>import("./SceneAdventure1-CRzGrK-O.js"),__vite__mapDeps([2,1]),import.meta.url),"./SceneAdventure2.ts":()=>c(()=>import("./SceneAdventure2-BhLiE6IG.js"),__vite__mapDeps([3,1]),import.meta.url)}),r=`./SceneAdventure${l.getChapter()}.ts`,{SceneAdventure:n}=await e[r]();await i.goto(()=>new n,{msIn:400,msOut:800})}),this.#t.before("fullscreen",async()=>(document.fullscreenElement?document.exitFullscreen():document.body.requestFullscreen(),!0)),[...y,...f,...I].forEach(e=>{this.#t.before(e,async()=>{const{SceneGame:r}=await c(async()=>{const{SceneGame:n}=await import("./SceneGame-CtHWhMcB.js");return{SceneGame:n}},__vite__mapDeps([4,1]),import.meta.url);return await i.goto(()=>new r(e,{from:"title"}),{mode:"fade"}),!0})}),this.#a(),this.#o(),this.#s(),this.#t.updateButtons()}#s(){const t=this.#t.pages.get("first");for(let a=0;a<16;a++){const e=new Image;e.src="assets/images/particle0.png",e.classList.add("particle0");const r=Math.random()*16;e.style.animationDelay=`${r/2}s`,e.style.width=`${r+16}vh`,e.style.animationDuration=`${Math.random()*4+8}s`,e.style.aspectRatio="1",e.style.position="absolute",e.style.left=`${10+80*(a/16)}%`,e.style.setProperty("--rotation",Math.random()>.5?"-1":"1"),t.appendChild(e)}const s=new Image;s.src="assets/images/particle1.png",this.#t.pages.getValues().forEach(a=>{a.addEventListener("click",e=>{const r=e.target.getBoundingClientRect(),n=e.clientX-r.left,v=e.clientY-r.top;for(let m=0;m<8;m++){const o=s.cloneNode();o.style.position="fixed",o.style.pointerEvents="none",o.style.left=`calc(${r.left+n}px - 4dvh)`,o.style.top=`calc(${r.top+v}px - 4dvh)`,o.style.width="8dvh",o.style.height="8dvh",o.style.scale=""+(Math.random()/2+.8),o.style.opacity=""+Math.random()*.5,o.style.transition="transform 1s ease-out, opacity 1s ease-out",o.style.zIndex="1000",document.body.appendChild(o);const u=Math.PI*2*m/8+Math.random(),p=60+Math.random()*20;requestAnimationFrame(()=>{o.style.transform=`translate(${Math.cos(u)*p/8}dvh, ${Math.sin(u)*p/8}dvh) scale(0.5) rotate(${u/Math.PI*180*(Math.random()-.5)}deg)`,o.style.opacity="0"}),setTimeout(()=>{o.remove()},1e3)}})})}#a(){const t=[...y,...f,...I],s=this.#t.pages.get("past"),a=l.getClearedStageId();t.forEach(e=>{a.includes(e)&&(s.innerHTML+=`<button data-link="stage-${e}">${e}</button>`,this.#t.before(`stage-${e}`,async()=>{const{SceneGame:r}=await c(async()=>{const{SceneGame:n}=await import("./SceneGame-CtHWhMcB.js");return{SceneGame:n}},__vite__mapDeps([4,1]),import.meta.url);await i.goto(()=>new r(e,{from:"title"}),{mode:"fade"})}))})}#o(){const{bgm:t,se:s}=l.getVolume(),a=g.container.querySelector("#bgm-volume"),e=g.container.querySelector("#se-volume");a.value=""+t,e.value=""+s,d.setVolume(t/9),S.setVolume(s/9),a.oninput=()=>{d.setVolume(+a.value/9),l.setVolume({bgm:+a.value,se:+e.value})},e.oninput=()=>{S.setVolume(+e.value/9),l.setVolume({bgm:+a.value,se:+e.value})},this.#t.before("delete-adventure-data",async()=>(localStorage.removeItem("flags"),localStorage.removeItem("items"),localStorage.removeItem("chapter"),localStorage.removeItem("current-branch"),!0)),this.#t.before("delete-data",async()=>(localStorage.clear(),await i.goto(()=>new h),!0))}}const M=Object.freeze(Object.defineProperty({__proto__:null,SceneTitle:h},Symbol.toStringTag,{value:"Module"}));export{l as L,M as S,y as g,E as i};
//# sourceMappingURL=SceneTitle-DCaVOL64.js.map
