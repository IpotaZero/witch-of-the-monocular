const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./SceneAdventure0-Bys_PuXq.js","../run.js","./SceneAdventure1-CzFOA_aV.js","./SceneGame-Blr9UHqg.js"])))=>i.map(i=>d[i]);
import{S as d,P as p,D as c,B as u,a as l,_ as i,b as g}from"../run.js";class n{static getChapter(){const t=localStorage.getItem("chapter");return t?JSON.parse(t):0}static setChapter(t){localStorage.setItem("chapter",`${t}`)}static getCurrentBranch(){const t=localStorage.getItem("current-branch");return t?JSON.parse(t):[]}static setCurrentBranch(t){localStorage.setItem("current-branch",JSON.stringify(t))}static addBranch(t){const e=this.getCurrentBranch();e.push(t),this.setCurrentBranch(e)}static getItems(){const t=localStorage.getItem("items");return t?JSON.parse(t):[]}static setItems(t){localStorage.setItem("items",JSON.stringify(t))}static removeItem(t){const e=this.getItems();this.setItems(e.filter(s=>s!==t))}static addItem(t){const e=this.getItems();e.includes(t)||(e.push(t),this.setItems(e))}static getFlags(){const t=localStorage.getItem("flags");return t?JSON.parse(t):[]}static setFlags(t){localStorage.setItem("flags",JSON.stringify(t))}static addFlag(t){const e=this.getFlags();e.push(t),this.setFlags(e)}static addClearedStageId(t){const e=this.getClearedStageId();e.includes(t)||(e.push(t),localStorage.setItem("cleared-stages",JSON.stringify(e)))}static getClearedStageId(){const t=localStorage.getItem("cleared-stages");return t?JSON.parse(t):[]}static getVolume(){const t=localStorage.getItem("volume");return t?JSON.parse(t):{bgm:9,se:9}}static setVolume(t){localStorage.setItem("volume",JSON.stringify(t))}}class m extends d{ready;#t=new p;constructor(t){super(),this.ready=this.#e(t)}async#e(t){const e=await(await fetch("pages/title.html")).text();await this.#t.load(c.container,e,{history:t}),u.ffp("assets/sounds/title.mp3"),this.#t.on("start",async()=>{const a=Object.assign({"./SceneAdventure0.ts":()=>i(()=>import("./SceneAdventure0-Bys_PuXq.js"),__vite__mapDeps([0,1]),import.meta.url),"./SceneAdventure1.ts":()=>i(()=>import("./SceneAdventure1-CzFOA_aV.js"),__vite__mapDeps([2,1]),import.meta.url)}),r=`./SceneAdventure${n.getChapter()}.ts`,{SceneAdventure:o}=await a[r]();await l.goto(()=>new o,{msIn:400,msOut:800})}),this.#t.before("fullscreen",async()=>(document.fullscreenElement?document.exitFullscreen():document.body.requestFullscreen(),!0)),["1階のカギ"].forEach(a=>{this.#t.before(a,async()=>{const{SceneGame:r}=await i(async()=>{const{SceneGame:o}=await import("./SceneGame-Blr9UHqg.js");return{SceneGame:o}},__vite__mapDeps([3,1]),import.meta.url);return await l.goto(()=>new r(a,{from:"title"}),{mode:"fade"}),!0})}),this.#a(),this.#r(),this.#s(),this.#t.updateButtons()}#s(){const t=this.#t.pages.get("first");for(let e=0;e<16;e++){const s=new Image;s.src="assets/images/particle0.png",s.classList.add("particle0");const a=Math.random()*16;s.style.animationDelay=`${a/2}s`,s.style.width=`${a+16}vh`,s.style.animationDuration=`${Math.random()*4+8}s`,s.style.aspectRatio="1",s.style.position="absolute",s.style.left=`${10+80*(e/16)}%`,t.appendChild(s)}}#a(){const t=["1階のカギ","包丁","ライター","空のバケツ","ぬるついたハンマー","ヘアピン","魔導書","薄い本"],e=this.#t.pages.get("past"),s=n.getClearedStageId();t.forEach(a=>{s.includes(a)&&(e.innerHTML+=`<button data-link="stage-${a}">${a}</button>`,this.#t.before(`stage-${a}`,async()=>{const{SceneGame:r}=await i(async()=>{const{SceneGame:o}=await import("./SceneGame-Blr9UHqg.js");return{SceneGame:o}},__vite__mapDeps([3,1]),import.meta.url);await l.goto(()=>new r(a,{from:"title"}),{mode:"fade"})}))})}#r(){const{bgm:t,se:e}=n.getVolume(),s=c.container.querySelector("#bgm-volume"),a=c.container.querySelector("#se-volume");s.value=""+t,a.value=""+e,u.setVolume(t/9),g.setVolume(e/9),s.oninput=()=>{u.setVolume(+s.value/9),n.setVolume({bgm:+s.value,se:+a.value})},a.oninput=()=>{g.setVolume(+a.value/9),n.setVolume({bgm:+s.value,se:+a.value})};const r=c.container.querySelector("#delete-data");r.onclick=()=>{localStorage.clear(),l.goto(()=>new m)}}}const f=Object.freeze(Object.defineProperty({__proto__:null,SceneTitle:m},Symbol.toStringTag,{value:"Module"}));export{n as L,f as S};
//# sourceMappingURL=SceneTitle-BxgWCsaY.js.map
