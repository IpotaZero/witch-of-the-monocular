const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./SceneTitle-DCaVOL64.js","../run.js","./SceneGame-CtHWhMcB.js"])))=>i.map(i=>d[i]);
import{S as d,P as l,_ as u,a as h,c as s,D as n}from"../run.js";import{L as a,i as f}from"./SceneTitle-DCaVOL64.js";class w extends d{ready;#t=new l;constructor(){super(),this.ready=this.#e()}async end(){a.setCurrentBranch(this.#t.getCurrentBranch())}async#e(){this.#t.before("title",async()=>{this.#t.shaveBranch(1);const{SceneTitle:e}=await u(async()=>{const{SceneTitle:r}=await import("./SceneTitle-DCaVOL64.js").then(o=>o.S);return{SceneTitle:r}},__vite__mapDeps([0,1]),import.meta.url);return await h.goto(()=>new e),!0}),this.#t.on("first",()=>{a.getFlags().includes("地下")||(a.addFlag("地下"),s.say("大丈夫!?","とりあえず......出口を探そうか。"))}),Object.entries({大穴:["(ここから落ちてきたみたいだ。)"],格子:["(さすがに通れそうにない。)"],扉:["(開かない。)"]}).forEach(([e,r])=>{this.#t.before(e,async()=>(s.say(...r),await s.wait(),!0))}),this.#t.onLeft("first",async()=>{s.say("(穴が開いている。ギリギリ通れそうだ。)"),await s.wait()});const i=[];i.forEach(e=>{this.#t.before("get-"+e,async()=>{this.#t.shaveBranch(1);const{SceneGame:r}=await u(async()=>{const{SceneGame:o}=await import("./SceneGame-CtHWhMcB.js");return{SceneGame:o}},__vite__mapDeps([2,1,0]),import.meta.url);return await h.goto(()=>new r(e,{from:"adventure"}),{mode:"fade"}),!0})}),i.forEach(e=>{this.#t.on("clear-"+e,async r=>{a.addItem(e),this.#a(),r.back(1,{msIn:0,msOut:0}),s.say(`(${e}を手に入れた。)`)})});const t=await(await fetch("pages/adventure2.html")).text();await this.#t.load(n.container,t,{history:a.getCurrentBranch()}),this.#a()}#a(){const c=(t,e)=>n.container.querySelector(`[data-link="${t}"]`)?.classList.toggle("hidden",e),i=f;[...n.container.querySelector("#item").children].filter(t=>!t.hasAttribute("data-back")).forEach(t=>t.remove()),a.getItems().forEach(t=>{c(t,!0),n.container.querySelector("#item").innerHTML+=`<button data-link="item-${t}">${t}</button>`,this.#t.before(`item-${t}`,async()=>(s.say(i[t]??"エラー"),!0))}),a.getItems().includes("ハンマー")&&c("ぬるついたハンマー",!0),this.#t.updateButtons(),n.container.querySelector("#update").onclick=async()=>{a.setCurrentBranch(this.#t.getCurrentBranch()),this.#e()}}}export{w as SceneAdventure};
//# sourceMappingURL=SceneAdventure2-BhLiE6IG.js.map
