class r{static#t={color:"black",width:6,anchorA:"center",anchorB:"center",arrow:!1};static#e=null;static#a(){const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.id="connector-layer",Object.assign(t.style,{position:"fixed",inset:"0",width:"100vw",height:"100vh",pointerEvents:"none"});const i=this.#o(t),e=document.createElementNS(t.namespaceURI,"defs");return e.appendChild(i),t.appendChild(e),t}static#o(t){const i=document.createElementNS(t.namespaceURI,"marker");i.id="arrow-end",i.setAttribute("orient","auto"),i.setAttribute("markerWidth","4"),i.setAttribute("markerHeight","4"),i.setAttribute("refX","2.3"),i.setAttribute("refY","2");const e=document.createElementNS(t.namespaceURI,"path");return e.setAttribute("d",`M 4 0
             Q 2 1.3, 0 2
             Q 2 2.7, 4 4
             Z`),e.setAttribute("fill","currentColor"),i.appendChild(e),i}static ensureLayer(){return this.#e||(this.#e=this.#a()),this.#e}line;hitLine;options;#i;#r;#s;#n;#h=null;constructor(t,i,e={}){this.#i=t,this.#r=i,this.options={...r.#t,...e};const s=r.ensureLayer();this.hitLine=this.#d(s),s.appendChild(this.hitLine),this.line=this.#c(s),s.appendChild(this.line),this.#u(),this.update()}#c(t){const i=document.createElementNS(t.namespaceURI,"polyline");return i.setAttribute("stroke","currentColor"),i.setAttribute("stroke-width",String(this.options.width)),i.setAttribute("stroke-linecap","round"),this.options.arrow&&i.setAttribute("marker-mid","url(#arrow-end)"),i.style.pointerEvents="none",i}#d(t){const i=document.createElementNS(t.namespaceURI,"line");return i.setAttribute("stroke","transparent"),i.setAttribute("stroke-width",String(this.options.width*8)),i.setAttribute("stroke-linecap","round"),i.style.pointerEvents="stroke",i}#u(){const t=this.update.bind(this);window.addEventListener("scroll",t,{passive:!0}),window.addEventListener("resize",t,{passive:!0}),this.#s=new ResizeObserver(t),this.#n=new ResizeObserver(t),this.#s.observe(this.#i),this.#n.observe(this.#r)}#l(t,i){const e=t.getBoundingClientRect();switch(i){case"center":return{x:e.left+e.width/2,y:e.top+e.height/2};case"top":return{x:e.left+e.width/2,y:e.top};case"bottom":return{x:e.left+e.width/2,y:e.bottom};case"left":return{x:e.left,y:e.top+e.height/2};case"right":return{x:e.right,y:e.top+e.height/2}}}update(){this.#h===null&&(this.#h=requestAnimationFrame(()=>{const t=this.#l(this.#i,this.options.anchorA),i=this.#l(this.#r,this.options.anchorB);this.line.setAttribute("points",`${t.x},${t.y} ${(t.x+i.x)/2},${(t.y+i.y)/2} ${i.x},${i.y}`),this.hitLine.setAttribute("x1",String(t.x)),this.hitLine.setAttribute("y1",String(t.y)),this.hitLine.setAttribute("x2",String(i.x)),this.hitLine.setAttribute("y2",String(i.y)),this.#h=null}))}destroy(){window.removeEventListener("scroll",this.update),window.removeEventListener("resize",this.update),this.#s.disconnect(),this.#n.disconnect(),this.line.remove(),this.hitLine.remove()}}class h{$defaultState=[];$vertices=[];$connectors=new Map;#t=[];#e=[];#a=new AbortController;onClear=()=>{};constructor(t){this.$setupElement(t),t.appendChild(r.ensureLayer()),this.reset(),this.#o(t),this.#r()}reset(){this.#t=[...this.$defaultState],this.#s(),requestAnimationFrame(()=>{this.#i()})}destroy(){this.$connectors.forEach((t,i)=>i.destroy()),this.#e.forEach(t=>t.remove()),this.#a.abort()}$setupElement(t){}$createVertex(t,i,e){const s=document.createElement("span");return s.classList.add("vertex"),s.style.left=`calc(50% + ${t}dvh)`,s.style.top=`calc(50% + ${i}dvh)`,s.style.setProperty("--value",e+""),s.innerHTML=`
            <input class="answer" type="text" readonly value="${e||""}">
        `,s}#o(t){this.#e=this.$vertices.map((i,e)=>{const s=document.createElement("input");return s.classList.add("value"),s.setAttribute("value",`${e||""}`),s.style.setProperty("--value",e+""),t.appendChild(s),s}),this.#i()}#i(){this.#e.forEach((t,i)=>{const e=this.$vertices[this.#t.indexOf(i)].getBoundingClientRect();t.style.left=`${e.left+e.width/2}px`,t.style.top=`${e.top+e.height/2}px`})}#r(){this.$connectors.forEach(([t,i],e)=>{e.hitLine.addEventListener("pointerover",()=>{if(e.hitLine.classList.contains("available")){e.line.classList.add("hovered");const s=this.#t[t]===0?i:t;this.#e[this.#t[s]].classList.add("yurayura")}}),e.hitLine.addEventListener("pointerleave",()=>{e.line.classList.remove("hovered"),this.#e.forEach(s=>s.classList.remove("yurayura"))}),e.hitLine.addEventListener("click",()=>{this.#n(t,i,e.options.arrow)})}),window.addEventListener("resize",()=>{this.#e.forEach(t=>{t.classList.add("imm")}),requestAnimationFrame(()=>{this.#i(),this.#e.forEach(t=>{t.classList.remove("imm")})})},{signal:this.#a.signal})}#s(){const t=this.#t.indexOf(0);this.$connectors.forEach((i,e)=>{let s=i.includes(t);e.options.arrow&&(s=i[0]===t),e.line.classList.toggle("available",s),e.hitLine.classList.toggle("available",s),s&&(e.line.remove(),e.hitLine.remove(),r.ensureLayer().appendChild(e.line),r.ensureLayer().appendChild(e.hitLine))})}#n(t,i,e){const s=this.#t.indexOf(0);if(e){if(s!==t)return}else if(s!==t&&s!==i)return;[this.#t[t],this.#t[i]]=[this.#t[i],this.#t[t]],this.#t.join()===this.#t.map((o,n)=>n).join()&&this.onClear(),this.#s(),this.#i()}}export{r as C,h as G};
//# sourceMappingURL=Game-Dbs3negb.js.map
